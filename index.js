
const keyboardKeys = {
    Backquote: {
        ru: 'ё',
        shRu: 'Ё',
        en: '`',
        shEn: '~'
    },
    Digit1: {
        ru: '1',
        shRu: '!',
        en: '1',
        shEn: '!'
    },
    Digit2: {
        ru: '2',
        shRu: '"',
        en: '2',
        shEn: '@'
    },
    Digit3: {
        ru: '3',
        shRu: '№',
        en: '3',
        shEn: '#'
    },
    Digit4: {
        ru: '4',
        shRu: ';',
        en: '4',
        shEn: '$'
    },
    Digit5: {
        ru: '5',
        shRu: '%',
        en: '5',
        shEn: '%'
    },
    Digit6: {
        ru: '6',
        shRu: ':',
        en: '6',
        shEn: '^'
    },
    Digit7: {
        ru: '7',
        shRu: '?',
        en: '7',
        shEn: '&'
    },
    Digit8: {
        ru: '8',
        shRu: '*',
        en: '8',
        shEn: '*'
    },
    Digit9: {
        ru: '9',
        shRu: '(',
        en: '9',
        shEn: '('
    },
    Digit0: {
        ru: '0',
        shRu: ')',
        en: '0',
        shEn: ')'
    },
    Minus: {
        ru: '-',
        shRu: '_',
        en: '-',
        shEn: '_'
    },
    Equal: {
        ru: '=',
        shRu: '+',
        en: '=',
        shEn: '+'
    },
    Backspace: {
        ru: 'Backspace',
        shRu: 'Backspace',
        en: 'Backspace',
        shEn: 'Backspace'
    },
    Tab: {
        ru: 'Tab',
        shRu: 'Tab',
        en: 'Tab',
        shEn: 'Tab'
    },
    KeyQ: {
        ru: 'й',
        shRu: 'Й',
        en: 'q',
        shEn: 'Q'
    },
    KeyW: {
        ru: 'ц',
        shRu: 'Ц',
        en: 'w',
        shEn: 'W'
    },
    KeyE: {
        ru: 'у',
        shRu: 'У',
        en: 'e',
        shEn: 'E'
    },
    KeyR: {
        ru: 'к',
        shRu: 'К',
        en: 'r',
        shEn: 'R'
    },
    KeyT: {
        ru: 'е',
        shRu: 'Е',
        en: 't',
        shEn: 'T'
    },
    KeyY: {
        ru: 'н',
        shRu: 'Н',
        en: 'y',
        shEn: 'Y'
    },
    KeyU: {
        ru: 'г',
        shRu: 'Г',
        en: 'u',
        shEn: 'U'
    },
    KeyI: {
        ru: 'ш',
        shRu: 'Ш',
        en: 'i',
        shEn: 'I'
    },
    KeyO: {
        ru: 'щ',
        shRu: 'Щ',
        en: 'o',
        shEn: 'O'
    },
    KeyP: {
        ru: 'з',
        shRu: 'З',
        en: 'p',
        shEn: 'P'
    },
    BracketLeft: {
        ru: 'х',
        shRu: 'Х',
        en: '[',
        shEn: '{'
    },
    BracketRight: {
        ru: 'ъ',
        shRu: 'Ъ',
        en: ']',
        shEn: '}'
    },
    Backslash: {
        ru: '\\',
        shRu: '/',
        en: '|',
        shEn: '\\'
    },
    CapsLock: {
        ru: 'CapsLock',
        shRu: 'CapsLock',
        en: 'CapsLock',
        shEn: 'CapsLock'
    },
    KeyA: {
        ru: 'ф',
        shRu: 'Ф',
        en: 'a',
        shEn: 'A'
    },
    KeyS: {
        ru: 'ы',
        shRu: 'Ы',
        en: 's',
        shEn: 'S'
    },
    KeyD: {
        ru: 'в',
        shRu: 'В',
        en: 'd',
        shEn: 'D'
    },
    KeyF: {
        ru: 'а',
        shRu: 'А',
        en: 'f',
        shEn: 'F'
    },
    KeyG: {
        ru: 'п',
        shRu: 'П',
        en: 'g',
        shEn: 'G'
    },
    KeyH: {
        ru: 'р',
        shRu: 'Р',
        en: 'h',
        shEn: 'H'
    },
    KeyJ: {
        ru: 'о',
        shRu: 'О',
        en: 'j',
        shEn: 'J'
    },
    KeyK: {
        ru: 'л',
        shRu: 'Л',
        en: 'k',
        shEn: 'K'
    },
    KeyL: {
        ru: 'д',
        shRu: 'Д',
        en: 'l',
        shEn: 'L'
    },
    Semicolon: {
        ru: 'ж',
        shRu: 'Ж',
        en: ';',
        shEn: ':'
    },
    Quote: {
        ru: 'э',
        shRu: 'Э',
        en: '\'',
        shEn: '\"'
    },
    Enter: {
        ru: 'Enter',
        shRu: 'Enter',
        en: 'Enter',
        shEn: 'Enter'
    },
    ShiftLeft: {
        ru: 'Shift',
        shRu: 'Shift',
        en: 'Shift',
        shEn: 'Shift'
    },
    KeyZ: {
        ru: 'я',
        shRu: 'Я',
        en: 'z',
        shEn: 'Z'
    },
    KeyX: {
        ru: 'ч',
        shRu: 'Ч',
        en: 'x',
        shEn: 'X'
    },
    KeyC: {
        ru: 'с',
        shRu: 'С',
        en: 'c',
        shEn: 'C'
    },
    KeyV: {
        ru: 'м',
        shRu: 'М',
        en: 'v',
        shEn: 'V'
    },
    KeyB: {
        ru: 'и',
        shRu: 'И',
        en: 'b',
        shEn: 'B'
    },
    KeyN: {
        ru: 'т',
        shRu: 'Т',
        en: 'n',
        shEn: 'N'
    },
    KeyM: {
        ru: 'ь',
        shRu: 'Ь',
        en: 'm',
        shEn: 'M'
    },
    Comma: {
        ru: 'б',
        shRu: 'Б',
        en: ',',
        shEn: '<'
    },
    Period: {
        ru: 'ю',
        shRu: 'Ю',
        en: '.',
        shEn: '>'
    },
    Slash: {
        ru: '.',
        shRu: ',',
        en: '/',
        shEn: '?'
    },
    ArrowUp: {
        ru: '^',
        shRu: '^',
        en: '^',
        shEn: '^'
    },
    ShiftRight: {
        ru: 'Shift',
        shRu: 'Shift',
        en: 'Shift',
        shEn: 'Shift'
    },
    ControlLeft: {
        ru: 'Ctrl',
        shRu: 'Ctrl',
        en: 'Ctrl',
        shEn: 'Ctrl'
    },
    MetaLeft: {
        ru: 'Win',
        shRu: 'Win',
        en: 'Win',
        shEn: 'Win'
    },
    AltLeft: {
        ru: 'Alt',
        shRu: 'Alt',
        en: 'Alt',
        shEn: 'Alt'
    },
    Space: {
        ru: ' ',
        shRu: ' ',
        en: ' ',
        shEn: ' '
    },
    AltRight: {
        ru: 'Alt',
        shRu: 'Alt',
        en: 'Alt',
        shEn: 'Alt'
    },
    ControlRight: {
        ru: 'Ctrl',
        shRu: 'Ctrl',
        en: 'Ctrl',
        shEn: 'Ctrl'
    },
    ArrowLeft: {
        ru: '<',
        shRu: '<',
        en: '<',
        shEn: '<'
    },
    ArrowDown: {
        ru: 'v',
        shRu: 'v',
        en: 'v',
        shEn: 'v'
    },
    ArrowRight: {
        ru: '>',
        shRu: '>',
        en: '>',
        shEn: '>'
    }
}

let wrapper = document.createElement('div');
wrapper.className = 'wrapper';
document.body.append(wrapper);

let textarea = document.createElement('textarea');
textarea.className = 'textarea';
textarea.readOnly = true;
wrapper.append(textarea);

let keyboard = document.createElement('div');
keyboard.className = 'keyboard';
wrapper.append(keyboard);

let shiftOn = false;
let capsLockOn = false;
let language = 'ru';
if (localStorage.getItem('lang') == 'en') {
    language = 'en';
}


for (let nod in keyboardKeys) {
    let key = document.createElement('div');
    key.className = 'key ' + String(nod).toLowerCase();
    if (language == 'ru') {
        key.innerHTML = keyboardKeys[nod].ru;
    } else {
        key.innerHTML = keyboardKeys[nod].en;
    }

    keyboard.append(key);
}

let keys = document.querySelectorAll('.key');

for (let i = 0; i < keys.length; i++) {
    keys[i].addEventListener('mousedown', function () {
        keys[i].style.transitionDuration = '.2s';
        keys[i].style.backgroundColor = 'rgb(255, 164, 60)';
        keys[i].style.borderRadius = '23px';
    });
    keys[i].addEventListener('mouseup', function () {
        keys[i].style.backgroundColor = 'whitesmoke';
        keys[i].style.borderRadius = '4px';
    });
    keys[i].addEventListener('click', function () {
        if (keys[i].className.includes('alt') ||
            keys[i].className.includes('control') ||
            keys[i].className.includes('metaleft')) {
        } else if (keys[i].className.includes('enter')) {
            textarea.value += String.fromCharCode(13);
        } else if (keys[i].className.includes('tab')) {
            textarea.value += String.fromCharCode(9);
        } else if (keys[i].className.includes('backspace')) {
            textarea.value = textarea.value.slice(0, -1);
        } else if (keys[i].className.includes('space')) {
            textarea.value += ' ';
        } else if (keys[i].className.includes('capslock') && !capsLockOn) {
            if (language === 'ru') {
                let i = 0;
                for (let nod in keyboardKeys) {
                    keys[i].innerHTML = keyboardKeys[nod].shRu;
                    i++;
                }
                capsLockOn = true;
            } else {
                let i = 0;
                for (let nod in keyboardKeys) {
                    keys[i].innerHTML = keyboardKeys[nod].shEn;
                    i++;
                }
                capsLockOn = true;
            }
        } else if (keys[i].className.includes('capslock') && capsLockOn) {
            if (language === 'ru') {
                let i = 0;
                for (let nod in keyboardKeys) {
                    keys[i].innerHTML = keyboardKeys[nod].ru;
                    i++;
                }
                capsLockOn = false;
            } else {
                let i = 0;
                for (let nod in keyboardKeys) {
                    keys[i].innerHTML = keyboardKeys[nod].en;
                    i++;
                }
                capsLockOn = false;
            }
        } else if (keys[i].className.includes('shift') && !shiftOn) {
            if (language === 'ru') {
                let i = 0;
                for (let nod in keyboardKeys) {
                    keys[i].innerHTML = keyboardKeys[nod].shRu;
                    i++;
                }
                shiftOn = true;
            } else {
                let i = 0;
                for (let nod in keyboardKeys) {
                    keys[i].innerHTML = keyboardKeys[nod].shEn;
                    i++;
                }
                shiftOn = true;
            }

        } else if (keys[i].className.includes('shift') && shiftOn) {
            if (language === 'ru') {
                let i = 0;
                for (let nod in keyboardKeys) {
                    keys[i].innerHTML = keyboardKeys[nod].ru;
                    i++;
                }
                shiftOn = false;
            } else {
                let i = 0;
                for (let nod in keyboardKeys) {
                    keys[i].innerHTML = keyboardKeys[nod].en;
                    i++;
                }
                shiftOn = false;
            }
        } else if (shiftOn) {
            textarea.value += keys[i].innerText;
            if (language === 'ru') {
                let i = 0;
                for (let nod in keyboardKeys) {
                    keys[i].innerHTML = keyboardKeys[nod].ru;
                    i++;
                }
                shiftOn = false;
            } else {
                let i = 0;
                for (let nod in keyboardKeys) {
                    keys[i].innerHTML = keyboardKeys[nod].en;
                    i++;
                }
                shiftOn = false;
            }
        } else {
            textarea.value += keys[i].innerText;
        }
    });
}
document.addEventListener('keydown', function (event) {
    if (event.altKey && event.shiftKey) {
        if (language === 'ru') {
            let i = 0;
            for (let nod in keyboardKeys) {
                keys[i].innerHTML = keyboardKeys[nod].en;
                if (keys[i].className.includes(' ' + String(event.code.toLowerCase()))) {
                    keys[i].style.transitionDuration = '.2s';
                    keys[i].style.backgroundColor = 'rgb(255, 164, 60)';
                    keys[i].style.borderRadius = '23px';
                }
                i++;
            }
            language = 'en';
            localStorage.setItem('lang', language);
        } else {
            let i = 0;
            for (let nod in keyboardKeys) {
                keys[i].innerHTML = keyboardKeys[nod].ru;
                if (keys[i].className.includes(' ' + String(event.code.toLowerCase()))) {
                    keys[i].style.transitionDuration = '.2s';
                    keys[i].style.backgroundColor = 'rgb(255, 164, 60)';
                    keys[i].style.borderRadius = '23px';
                }
                i++;
            }
            language = 'ru';
            localStorage.setItem('lang', language);
        }
    } else {
        for (let i = 0; i < keys.length; i++) {
            if (keys[i].className.includes(' ' + String(event.code.toLowerCase()))) {
                keys[i].style.transitionDuration = '.2s';
                keys[i].style.backgroundColor = 'rgb(255, 164, 60)';
                keys[i].style.borderRadius = '23px';

                if (keys[i].className.includes('control') ||
                    keys[i].className.includes('metaleft')) {
                } else if (keys[i].className.includes('enter')) {
                    textarea.value += String.fromCharCode(13);
                } else if (keys[i].className.includes('tab')) {
                    textarea.value += String.fromCharCode(9);
                    event.preventDefault();
                } else if (keys[i].className.includes('alt')) {
                    event.preventDefault();
                } else if (keys[i].className.includes('backspace')) {
                    textarea.value = textarea.value.slice(0, -1);
                } else if (keys[i].className.includes('space')) {
                    textarea.value += ' ';
                } else if (keys[i].className.includes('capslock') && !capsLockOn) {
                    if (language === 'ru') {
                        let i = 0;
                        for (let nod in keyboardKeys) {
                            keys[i].innerHTML = keyboardKeys[nod].shRu;
                            i++;
                        }
                        capsLockOn = true;
                    } else {
                        let i = 0;
                        for (let nod in keyboardKeys) {
                            keys[i].innerHTML = keyboardKeys[nod].shEn;
                            i++;
                        }
                        capsLockOn = true;
                    }
                } else if (keys[i].className.includes('capslock') && capsLockOn) {
                    if (language === 'ru') {
                        let i = 0;
                        for (let nod in keyboardKeys) {
                            keys[i].innerHTML = keyboardKeys[nod].ru;
                            i++;
                        }
                        capsLockOn = false;
                    } else {
                        let i = 0;
                        for (let nod in keyboardKeys) {
                            keys[i].innerHTML = keyboardKeys[nod].en;
                            i++;
                        }
                        capsLockOn = false;
                    }
                } else if (keys[i].className.includes('shift') && !shiftOn) {
                    if (language === 'ru') {
                        let i = 0;
                        for (let nod in keyboardKeys) {
                            keys[i].innerHTML = keyboardKeys[nod].shRu;
                            i++;
                        }
                        shiftOn = true;
                    } else {
                        let i = 0;
                        for (let nod in keyboardKeys) {
                            keys[i].innerHTML = keyboardKeys[nod].shEn;
                            i++;
                        }
                        shiftOn = true;
                    }

                } else if (keys[i].className.includes('shift') && shiftOn) {
                    if (language === 'ru') {
                        let i = 0;
                        for (let nod in keyboardKeys) {
                            keys[i].innerHTML = keyboardKeys[nod].ru;
                            i++;
                        }
                        shiftOn = false;
                    } else {
                        let i = 0;
                        for (let nod in keyboardKeys) {
                            keys[i].innerHTML = keyboardKeys[nod].en;
                            i++;
                        }
                        shiftOn = false;
                    }
                } else if (shiftOn) {
                    textarea.value += keys[i].innerText;
                    if (language === 'ru') {
                        let i = 0;
                        for (let nod in keyboardKeys) {
                            keys[i].innerHTML = keyboardKeys[nod].ru;
                            i++;
                        }
                        shiftOn = false;
                    } else {
                        let i = 0;
                        for (let nod in keyboardKeys) {
                            keys[i].innerHTML = keyboardKeys[nod].en;
                            i++;
                        }
                        shiftOn = false;
                    }
                } else {
                    textarea.value += keys[i].innerText;
                }
            }
        }
    }
});
document.addEventListener('keyup', function (event) {
    for (let i = 0; i < keys.length; i++) {
        if (keys[i].className.includes(String(event.code.toLowerCase()))) {
            keys[i].style.backgroundColor = 'whitesmoke';
            keys[i].style.borderRadius = '4px';
        }
    }

});









